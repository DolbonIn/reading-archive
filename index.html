<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reading Archive · AI Bookshelf</title>
  <link rel="stylesheet" href="assets/css/shelf.css" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" type="image/png" sizes="192x192" href="assets/icons/icon-192.png" />
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png" />
  <meta name="theme-color" content="#090d1a" />
  <meta name="description" content="AI가 자동으로 생성한 HTML 프레젠테이션을 책장 형태로 전시합니다." />
</head>
<body>
  <div id="app">
    <!-- Ambient background -->
    <div class="background" aria-hidden="true">
      <div class="bg-gradient"></div>
      <div class="bg-orbit orbit-1"></div>
      <div class="bg-orbit orbit-2"></div>
      <div class="bg-noise"></div>
    </div>

    <!-- Top bar: brand + quick stats -->
    <header class="top-bar">
      <div class="brand">
        <div class="brand-mark">
          <span class="brand-dot"></span>
        </div>
        <div class="brand-text">
          <span class="brand-label">Reading Archive</span>
          <span class="brand-sub">AI Generated Deck Library</span>
        </div>
      </div>
      <div class="top-actions">
        <div class="stat-pill">
          <span class="stat-label">Total Decks</span>
          <span id="stat-total" class="stat-value">0</span>
        </div>
        <div class="view-toggle" role="radiogroup" aria-label="뷰 전환">
          <button class="view-toggle__btn is-active" data-view="grid" aria-pressed="true">Grid</button>
          <button class="view-toggle__btn" data-view="stack" aria-pressed="false">Cascade</button>
        </div>
      </div>
    </header>

    <!-- Search / filters -->
    <section class="filters" aria-label="검색 및 필터">
      <div class="search-box">
        <input
          id="search-input"
          type="search"
          placeholder="제목, 키워드, 태그로 검색..."
          autocomplete="off"
          aria-label="책 검색"
        />
        <span class="search-hint">/ 키를 눌러 바로 검색</span>
      </div>
      <div class="pill-filters">
        <button class="pill is-active" data-filter="all">All</button>
        <button class="pill" data-filter="mindset">Mindset</button>
        <button class="pill" data-filter="business">Business</button>
        <button class="pill" data-filter="psychology">Psychology</button>
        <button class="pill" data-filter="philosophy">Philosophy</button>
      </div>
    </section>

    <main class="layout" aria-live="polite">
      <!-- Bookshelf -->
      <section class="shelf" aria-label="AI 책장">
        <div id="bookshelf" class="shelf-list" aria-live="polite"></div>
        <div id="empty-state" class="empty-state" hidden>
          <div class="empty-pill">No matches</div>
          <p>검색 조건에 맞는 프레젠테이션이 없습니다.</p>
          <p class="empty-sub">필터를 초기화하거나 다른 키워드를 입력해 보세요.</p>
        </div>
      </section>

      <!-- Detail side panel -->
      <aside id="info-panel" class="detail-panel" aria-live="polite">
        <div class="detail-header">
          <span class="detail-label">Deck Preview</span>
        </div>
        <div class="detail-cover">
          <img id="info-cover" src="assets/covers/default.svg" alt="책 표지" />
          <div class="detail-cover-glow"></div>
        </div>
        <div class="detail-body">
          <h2 id="info-title" class="detail-title">책을 선택해 상세 정보를 확인하세요</h2>
          <p id="info-meta" class="detail-meta">AI가 생성한 슬라이드, PDF 기반 요약</p>
          <p id="info-description" class="detail-description"></p>
          <div id="info-tags" class="detail-tags"></div>
        </div>
        <a
          id="info-button"
          class="detail-button"
          href="#"
          target="_blank"
          rel="noopener"
        >
          프레젠테이션 열기
        </a>
      </aside>
    </main>

    <!-- Footer hint -->
    <footer class="footer-hint">
      <span>Tip</span>
      <span>책에 마우스를 올리면 오른쪽에서 실시간 미리보기가 열립니다. 클릭하면 새 탭에서 AI 프레젠테이션이 실행됩니다.</span>
    </footer>
  </div>

  <script defer src="assets/js/shelf.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js').catch((error) => {
          console.error('Service worker registration failed:', error);
        });
      });
    }
  </script>
</body>
</html>
